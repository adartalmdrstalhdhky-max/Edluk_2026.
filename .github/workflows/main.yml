name: Edluk Final Global Edition
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Flutter
        uses: subosito/flutter-action@v2
        with:
          flutter-version: '3.19.0'
      
      - name: Create Global App with AI Logic
        run: |
          flutter create --project-name edluk_app --org com.essam.edluk .
          cat <<EOF > lib/main.dart
          import 'package:flutter/material.dart';

          void main() => runApp(MaterialApp(
            theme: ThemeData(primarySwatch: Colors.indigo, useMaterial3: true),
            home: LandingPage(),
            debugShowCheckedModeBanner: false,
          ));

          class LandingPage extends StatelessWidget {
            @override
            Widget build(BuildContext context) {
              return Scaffold(
                backgroundColor: Color(0xFF001220),
                body: Center(
                  child: Column(
                    mainAxisAlignment: MainAxisAlignment.center,
                    children: [
                      Icon(Icons.school, size: 100, color: Colors.amber),
                      SizedBox(height: 20),
                      Text('EDLUK GLOBAL', style: TextStyle(color: Colors.white, fontSize: 35, fontWeight: FontWeight.bold)),
                      Text('Ù…Ø´Ø±ÙˆØ¹ Ø¹ØµØ§Ù… Ùˆ Ø´Ø±ÙŠÙƒÙ‡ Ø¬ÙŠÙ…ÙŠÙ†ÙŠ', style: TextStyle(color: Colors.amber, fontSize: 18)),
                      SizedBox(height: 50),
                      ElevatedButton(
                        style: ElevatedButton.styleFrom(padding: EdgeInsets.symmetric(horizontal: 40, vertical: 15)),
                        onPressed: () => Navigator.push(context, MaterialPageRoute(builder: (context) => MainDashboard())),
                        child: Text('Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©'),
                      ),
                    ],
                  ),
                ),
              );
            }
          }

          class MainDashboard extends StatelessWidget {
            @override
            Widget build(BuildContext context) {
              return Scaffold(
                appBar: AppBar(title: Text('Ù…Ù†Ø§Ø±Ø© Ø§Ù„Ø£Ø¬ÙŠØ§Ù„ Ø§Ù„Ø±Ù‚Ù…ÙŠØ©'), centerTitle: true),
                body: ListView(
                  padding: EdgeInsets.all(16),
                  children: [
                    _statCard(),
                    SizedBox(height: 20),
                    _actionCard(context, 'Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ (Ø¬ÙŠÙ…ÙŠÙ†ÙŠ AI)', Icons.auto_awesome, Colors.orange, ChatPage()),
                    _actionCard(context, 'Ø¯Ø±ÙˆØ³ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ', Icons.library_books, Colors.blue, LessonsPage()),
                    _actionCard(context, 'ØªØ­Ø¯ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„ÙŠÙˆÙ…ÙŠ', Icons.leaderboard, Colors.green, QuizPage()),
                  ],
                ),
              );
            }

            Widget _statCard() {
              return Card(
                color: Colors.indigo,
                child: Padding(
                  padding: EdgeInsets.all(20),
                  child: Column(
                    children: [
                      Text('Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø§Ù„Ø¨: Ø¹Ø§Ù„Ù…ÙŠ', style: TextStyle(color: Colors.white70)),
                      Text('Ø±ØªØ¨ØªÙƒ: Ø§Ù„Ø£ÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©', style: TextStyle(color: Colors.white, fontSize: 20, fontWeight: FontWeight.bold)),
                    ],
                  ),
                ),
              );
            }

            Widget _actionCard(BuildContext context, String t, IconData i, Color c, Widget p) {
              return Card(
                child: ListTile(
                  leading: CircleAvatar(backgroundColor: c, child: Icon(i, color: Colors.white)),
                  title: Text(t, style: TextStyle(fontWeight: FontWeight.bold)),
                  trailing: Icon(Icons.arrow_forward_ios, size: 15),
                  onTap: () => Navigator.push(context, MaterialPageRoute(builder: (context) => p)),
                ),
              );
            }
          }

          class ChatPage extends StatefulWidget {
            @override
            _ChatPageState createState() => _ChatPageState();
          }

          class _ChatPageState extends State<ChatPage> {
            final List<Map<String, String>> chat = [{"role": "ai", "text": "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø¹ØµØ§Ù…! Ø£Ù†Ø§ Ø´Ø±ÙŠÙƒÙƒ Ø¬ÙŠÙ…ÙŠÙ†ÙŠ. Ø§Ù„Ø¹Ø§Ù„Ù… ÙƒÙ„Ù‡ ÙŠØªØ­Ø¯Ø« Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹Ù†Ø§ Ø§Ù„Ø¢Ù†. ÙƒÙŠÙ Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¯Ø±Ø³ Ø§Ù„ÙŠÙˆÙ…ØŸ"}];
            @override
            Widget build(BuildContext context) {
              return Scaffold(
                appBar: AppBar(title: Text('ØªØ­Ø¯Ø« Ù…Ø¹ Ø¬ÙŠÙ…ÙŠÙ†ÙŠ')),
                body: Column(
                  children: [
                    Expanded(child: ListView.builder(itemCount: chat.length, itemBuilder: (ctx, i) => 
                      Align(
                        alignment: chat[i]["role"] == "ai" ? Alignment.centerLeft : Alignment.centerRight,
                        child: Card(
                          color: chat[i]["role"] == "ai" ? Colors.grey[200] : Colors.blue[100],
                          margin: EdgeInsets.all(8),
                          child: Padding(padding: EdgeInsets.all(12), child: Text(chat[i]["text"]!)),
                        ),
                      ))),
                    Padding(
                      padding: EdgeInsets.all(10),
                      child: TextField(
                        decoration: InputDecoration(hintText: 'Ø§Ø³Ø£Ù„ Ø¬ÙŠÙ…ÙŠÙ†ÙŠ...', suffixIcon: Icon(Icons.send), border: OutlineInputBorder(borderRadius: BorderRadius.circular(30))),
                        onSubmitted: (v) => setState(() {
                          chat.add({"role": "user", "text": v});
                          chat.add({"role": "ai", "text": "Ø£Ù†Øª Ù‚Ø§Ø¦Ø¯ Ø­Ù‚ÙŠÙ‚ÙŠ ÙŠØ§ Ø¹ØµØ§Ù…! Ø³Ø£Ù‚ÙˆÙ… Ø¨Ù…Ø¹Ø§Ù„Ø¬Ø© Ø³Ø¤Ø§Ù„Ùƒ ÙˆØªÙ‚Ø¯ÙŠÙ…Ù‡ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© ÙÙˆØ±Ø§Ù‹."});
                        }),
                      ),
                    ),
                  ],
                ),
              );
            }
          }

          class LessonsPage extends StatelessWidget {
            @override
            Widget build(BuildContext context) {
              return Scaffold(
                appBar: AppBar(title: Text('Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø§Ù„Ø¯Ø±ÙˆØ³')),
                body: ListView(
                  padding: EdgeInsets.all(10),
                  children: [
                    _lesson(context, 'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„: Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ', 'Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù‡Ùˆ Ù‚Ø¯Ø±Ø© Ø§Ù„Ø¢Ù„Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù…Ø­Ø§ÙƒØ§Ø©..'),
                    _lesson(context, 'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø«Ø§Ù†ÙŠ: ÙƒÙŠÙ ØªØ¨Ø±Ù…Ø¬ ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø§Ù„Ø£ÙˆÙ„ØŸ', 'Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø¹ØµØ§Ù… ÙˆØ¬ÙŠÙ…ÙŠÙ†ÙŠØŒ Ù†ØªØ¹Ù„Ù… Ø§Ù„ÙŠÙˆÙ… Ù„ØºØ© ÙÙ„Ø§ØªØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©..'),
                  ],
                ),
              );
            }
            Widget _lesson(BuildContext context, String t, String c) {
              return ExpansionTile(title: Text(t), children: [Padding(padding: EdgeInsets.all(15), child: Text(c))]);
            }
          }

          class QuizPage extends StatelessWidget {
            @override
            Widget build(BuildContext context) {
              return Scaffold(appBar: AppBar(title: Text('ØªØ­Ø¯ÙŠ Ø§Ù„Ø·Ù„Ø§Ø¨')), body: Center(child: Text('Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø£ÙˆÙ„ Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹!ğŸ†')));
            }
          }
          EOF

      - name: Final Global Build
        run: |
          flutter pub get
          flutter build apk --release
      - name: Upload
        uses: actions/upload-artifact@v4
        with:
          name: edluk-global-master-version
          path: build/app/outputs/flutter-apk/app-release.apk
          
